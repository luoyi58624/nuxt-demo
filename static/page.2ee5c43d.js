import{G as s,a3 as b,g as h,Q as K,a4 as j,a5 as R,r as O,a2 as v,a6 as S,a7 as x,a8 as p,a9 as T,aa as w,O as N,ab as B,_ as C,m as H}from"./entry.93eede02.js";function l(e){return e!==null&&typeof e=="object"}function d(e,o,t=".",a){if(!l(o))return d(e,{},t,a);const r=Object.assign({},o);for(const n in e){if(n==="__proto__"||n==="constructor")continue;const i=e[n];i!=null&&(a&&a(r,n,i,t)||(Array.isArray(i)&&Array.isArray(r[n])?r[n]=[...i,...r[n]]:l(i)&&l(r[n])?r[n]=d(i,r[n],(t?`${t}.`:"")+n.toString(),a):r[n]=i))}return r}function I(e){return(...o)=>o.reduce((t,a)=>d(t,a,"",e),{})}const L=I(),$=(e,o)=>o.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,t=>{var a;return((a=e.params[t.slice(1)])==null?void 0:a.toString())||""}),y=(e,o)=>{const t=e.route.matched.find(r=>{var n;return((n=r.components)==null?void 0:n.default)===e.Component.type}),a=o??(t==null?void 0:t.meta.key)??(t&&$(e.route,t));return typeof a=="function"?a(e.route):a},q=(e,o)=>({default:()=>e?s(b,e===!0?{}:e,o):o}),F=h({name:"RouteProvider",props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const o=e.renderKey,t=e.route,a={};for(const r in e.route)Object.defineProperty(a,r,{get:()=>o===e.renderKey?e.route[r]:t[r]});return K(R,j(a)),()=>s(e.vnode,{ref:e.vnodeRef})}}),z=h({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(e,{attrs:o,expose:t}){const a=H(),r=O(),n=v(R,null);t({pageRef:r});const i=v(x,null);let c;return()=>s(S,{name:e.name,route:e.route,...o},{default:u=>{const A=Q(n,u.route,u.Component),g=n&&n.matched.length===u.route.matched.length;if(!u.Component)return c&&!g?c:void 0;if(c&&i&&!i.isCurrent(u.route))return c;if(A&&n&&(!i||i!=null&&i.isCurrent(n)))return g?c:null;const m=y(u,e.pageKey),_=a.deferHydration(),f=!!(e.transition??u.route.meta.pageTransition??p),k=f&&G([e.transition,u.route.meta.pageTransition,p,{onAfterLeave:()=>{a.callHook("page:transition:finish",u.Component)}}].filter(Boolean));return c=T(C,f&&k,q(e.keepalive??u.route.meta.keepalive??B,s(w,{suspensible:!0,onPending:()=>a.callHook("page:start",u.Component),onResolve:()=>{N(()=>a.callHook("page:finish",u.Component).finally(_))}},{default:()=>s(F,{key:m,vnode:u.Component,route:u.route,renderKey:m,trackRootNodes:f,vnodeRef:r})}))).default(),c}})}});function D(e){return Array.isArray(e)?e:e?[e]:[]}function G(e){const o=e.map(t=>({...t,onAfterLeave:D(t.onAfterLeave)}));return L(...o)}function Q(e,o,t){if(!e)return!1;const a=o.matched.findIndex(r=>{var n;return((n=r.components)==null?void 0:n.default)===(t==null?void 0:t.type)});return!a||a===-1?!1:o.matched.slice(0,a).some((r,n)=>{var i,c,u;return((i=r.components)==null?void 0:i.default)!==((u=(c=e.matched[n])==null?void 0:c.components)==null?void 0:u.default)})||t&&y({route:o,Component:t})!==y({route:e,Component:t})}export{z as _};
